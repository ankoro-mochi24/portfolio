<%= render 'sidebar' %>

<h1>プロフィール編集</h1>

<div class="main-content">
  <div class="content">
    <%= form_with(model: @user, local: true) do |f| %>
      <div class="mb-3">
        <%= f.label :name, "ユーザー名" %>
        <%= f.text_field :name, class: "form-control" %>
      </div>

      <div class="mb-3">
        <%= f.label :email, "メールアドレス" %>
        <%= f.email_field :email, class: "form-control" %>
      </div>

      <h3>持っている調理器具</h3>
      <div data-controller="kitchen-tools">
        <div data-kitchen-tools-target="container">
          <%= f.fields_for :user_kitchen_tools do |ff| %>
            <div class="nested-fields">
              <%= ff.collection_select :kitchen_tool_id, @kitchen_tools, :id, :name, {}, { class: "form-select" } %>
              <%= ff.hidden_field :_destroy %>
              <button class="btn btn-danger" data-action="click->kitchen-tools#removeField">削除</button>
            </div>
          <% end %>
        </div>
        <button class="btn btn-success mt-2" data-action="click->kitchen-tools#addField">調理器具を追加</button>
      </div>

      <%= f.submit "更新する", class: "btn btn-primary mt-3" %>
    <% end %>

    <%= render "kitchen_tools_template" %>

    <%= link_to "キャンセル", user_path(@user), class: "btn btn-secondary mt-3" %>
  </div>
</div>
